import{a as e,i as t,n,t as r}from"./actions-DyrLdKPa.js";import{$ as i,B as a,E as o,G as s,I as c,K as l,L as u,M as d,P as f,Q as p,R as m,St as h,T as g,U as _,V as v,W as y,X as b,Y as x,Z as S,_t as C,at as w,bt as T,ct as E,dt as D,et as O,f as k,ft as A,gt as ee,h as te,ht as ne,i as j,it as M,k as N,l as P,lt as F,mt as re,n as I,nt as L,o as ie,ot as R,p as ae,pt as z,q as B,r as oe,rt as se,t as ce,tt as le,u as ue,ut as V,v as H,vt as de,xt as fe,yt as U}from"./index-ziRH-b2S.js";var pe=class extends N{#e;#t=void 0;#n;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),g(this.options,t)||this.#e.getMutationCache().notify({type:`observerOptionsUpdated`,mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&H(t.mutationKey)!==H(this.options.mutationKey)?this.reset():this.#n?.state.status===`pending`&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#a()}mutate(e,t){return this.#r=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){let e=this.#n?.state??ae();this.#t={...e,isPending:e.status===`pending`,isSuccess:e.status===`success`,isError:e.status===`error`,isIdle:e.status===`idle`,mutate:this.mutate,reset:this.reset}}#a(e){te.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,n=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type===`success`?(this.#r.onSuccess?.(e.data,t,n,r),this.#r.onSettled?.(e.data,null,t,n,r)):e?.type===`error`&&(this.#r.onError?.(e.error,t,n,r),this.#r.onSettled?.(void 0,e.error,t,n,r))}this.listeners.forEach(e=>{e(this.#t)})})}};function me(t,n){let r=n||e(),i=u(()=>r.defaultMutationOptions(ue(t))),a=new pe(r,i.value),s=i.value.shallow?re(a.getCurrentResult()):D(a.getCurrentResult()),c=a.subscribe(e=>{k(s,e)}),l=(e,t)=>{a.mutate(e,t).catch(()=>{})};w(i,()=>{a.setOptions(i.value)}),V(()=>{c()});let d=de(i.value.shallow?ne(s):A(s));return w(()=>s.error,e=>{if(e&&o(i.value.throwOnError,[e]))throw e}),{...d,mutate:l,mutateAsync:s.mutate,reset:s.reset}}function W(e){return typeof e==`function`}function he(e){return e==null}var G=e=>e!==null&&!!e&&typeof e==`object`&&!Array.isArray(e);function ge(e){return Number(e)>=0}function _e(e){let t=parseFloat(e);return isNaN(t)?e:t}function ve(e){return typeof e==`object`&&!!e}function ye(e){return e==null?e===void 0?`[object Undefined]`:`[object Null]`:Object.prototype.toString.call(e)}function K(e){if(!ve(e)||ye(e)!==`[object Object]`)return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function be(e,t){return Object.keys(t).forEach(n=>{if(K(t[n])&&K(e[n])){e[n]||(e[n]={}),be(e[n],t[n]);return}e[n]=t[n]}),e}function xe(e){let t=e.split(`.`);if(!t.length)return``;let n=String(t[0]);for(let e=1;e<t.length;e++){if(ge(t[e])){n+=`[${t[e]}]`;continue}n+=`.${t[e]}`}return n}var q={};function Se(e){return q[e]}function Ce(e,t,n){typeof n.value==`object`&&(n.value=J(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t===`__proto__`?Object.defineProperty(e,t,n):e[t]=n.value}function J(e){if(typeof e!=`object`)return e;var t=0,n,r,i,a=Object.prototype.toString.call(e);if(a===`[object Object]`?i=Object.create(e.__proto__||null):a===`[object Array]`?i=Array(e.length):a===`[object Set]`?(i=new Set,e.forEach(function(e){i.add(J(e))})):a===`[object Map]`?(i=new Map,e.forEach(function(e,t){i.set(J(t),J(e))})):a===`[object Date]`?i=new Date(+e):a===`[object RegExp]`?i=new RegExp(e.source,e.flags):a===`[object DataView]`?i=new e.constructor(J(e.buffer)):a===`[object ArrayBuffer]`?i=e.slice(0):a.slice(-6)===`Array]`&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Ce(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Ce(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}var we=Symbol(`vee-validate-form`),Te=Symbol(`vee-validate-form-context`),Ee=Symbol(`vee-validate-field-instance`),De=Symbol(`Default empty value`),Oe=typeof window<`u`;function ke(e){return W(e)&&!!e.__locatorRef}function Y(e){return!!e&&W(e.parse)&&e.__type===`VVTypedSchema`}function Ae(e){return!!e&&W(e.validate)}function je(e){return e===`checkbox`||e===`radio`}function Me(e){return G(e)||Array.isArray(e)}function Ne(e){return Array.isArray(e)?e.length===0:G(e)&&Object.keys(e).length===0}function Pe(e){return/^\[.+\]$/i.test(e)}function Fe(e){return Ie(e)&&e.multiple}function Ie(e){return e.tagName===`SELECT`}function Le(e,t){let n=![!1,null,void 0,0].includes(t.multiple)&&!Number.isNaN(t.multiple);return e===`select`&&`multiple`in t&&n}function Re(e,t){return!Le(e,t)&&t.type!==`file`&&!je(t.type)}function ze(e){return Be(e)&&e.target&&`submit`in e.target}function Be(e){return e?!!(typeof Event<`u`&&W(Event)&&e instanceof Event||e&&e.srcElement):!1}function Ve(e,t){return t in e&&e[t]!==De}function X(e,t){if(e===t)return!0;if(e&&t&&typeof e==`object`&&typeof t==`object`){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!X(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!X(r[1],t.get(r[0])))return!1;return!0}if(Ue(e)&&Ue(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(e=He(e),t=He(t),i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){var a=i[r];if(!X(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function He(e){return Object.fromEntries(Object.entries(e).filter(([,e])=>e!==void 0))}function Ue(e){return Oe?e instanceof File:!1}function We(e){return Pe(e)?e.replace(/\[|\]/gi,``):e}function Z(e,t,n){return e?Pe(t)?e[We(t)]:(t||``).split(/\.|\[(\d+)\]/).filter(Boolean).reduce((e,t)=>Me(e)&&t in e?e[t]:n,e):n}function Q(e,t,n){if(Pe(t)){e[We(t)]=n;return}let r=t.split(/\.|\[(\d+)\]/).filter(Boolean),i=e;for(let e=0;e<r.length;e++){if(e===r.length-1){i[r[e]]=n;return}(!(r[e]in i)||he(i[r[e]]))&&(i[r[e]]=ge(r[e+1])?[]:{}),i=i[r[e]]}}function Ge(e,t){if(Array.isArray(e)&&ge(t)){e.splice(Number(t),1);return}G(e)&&delete e[t]}function Ke(e,t){if(Pe(t)){delete e[We(t)];return}let n=t.split(/\.|\[(\d+)\]/).filter(Boolean),r=e;for(let e=0;e<n.length;e++){if(e===n.length-1){Ge(r,n[e]);break}if(!(n[e]in r)||he(r[n[e]]))break;r=r[n[e]]}let i=n.map((t,r)=>Z(e,n.slice(0,r).join(`.`)));for(let t=i.length-1;t>=0;t--)if(Ne(i[t])){if(t===0){Ge(e,n[0]);continue}Ge(i[t-1],n[t-1])}}function $(e){return Object.keys(e)}function qe(e,t=void 0){return l()?.provides[e]||x(e,t)}function Je(e,t,n){if(Array.isArray(e)){let n=[...e],r=n.findIndex(e=>X(e,t));return r>=0?n.splice(r,1):n.push(t),n}return X(e,t)?n:t}function Ye(e,t=0){let n=null,r=[];return function(...i){return n&&clearTimeout(n),n=setTimeout(()=>{let t=e(...i);r.forEach(e=>e(t)),r=[]},t),new Promise(e=>r.push(e))}}function Xe(e,t){return G(t)&&t.number?_e(e):e}function Ze(e,t){let n;return async function(...r){let i=e(...r);n=i;let a=await i;return i===n?(n=void 0,t(a,r)):a}}function Qe({get:e,set:t}){let n=z(J(e()));return w(e,e=>{X(e,n.value)||(n.value=J(e))},{deep:!0}),w(n,n=>{X(n,e())||t(J(n))},{deep:!0}),n}function $e(e){return Array.isArray(e)?e:e?[e]:[]}function et(e,t){let n={};for(let r in e)t.includes(r)||(n[r]=e[r]);return n}function tt(e){let t=null,n=[];return function(...r){let i=S(()=>{if(t!==i)return;let a=e(...r);n.forEach(e=>e(a)),n=[],t=null});return t=i,new Promise(e=>n.push(e))}}function nt(e,t,n){return t.slots.default?typeof e==`string`||!e?t.slots.default(n()):{default:()=>{var e;return(e=t.slots).default?.call(e,n())}}:t.slots.default}function rt(e){if(it(e))return e._value}function it(e){return`_value`in e}function at(e){return e.type===`number`||e.type===`range`?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function ot(e){if(!Be(e))return e;let t=e.target;if(je(t.type)&&it(t))return rt(t);if(t.type===`file`&&t.files){let e=Array.from(t.files);return t.multiple?e:e[0]}if(Fe(t))return Array.from(t.options).filter(e=>e.selected&&!e.disabled).map(rt);if(Ie(t)){let e=Array.from(t.options).find(e=>e.selected);return e?rt(e):t.value}return at(t)}function st(e){let t={};return Object.defineProperty(t,`_$$isNormalized`,{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?G(e)&&e._$$isNormalized?e:G(e)?Object.keys(e).reduce((t,n)=>{let r=ct(e[n]);return e[n]!==!1&&(t[n]=lt(r)),t},t):typeof e==`string`?e.split(`|`).reduce((e,t)=>{let n=ut(t);return n.name&&(e[n.name]=lt(n.params)),e},t):t:t}function ct(e){return e===!0?[]:Array.isArray(e)||G(e)?e:[e]}function lt(e){let t=e=>typeof e==`string`&&e[0]===`@`?dt(e.slice(1)):e;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,r)=>(n[r]=t(e[r]),n),{})}var ut=e=>{let t=[],n=e.split(`:`)[0];return e.includes(`:`)&&(t=e.split(`:`).slice(1).join(`:`).split(`,`)),{name:n,params:t}};function dt(e){let t=t=>Z(t,e)??t[e];return t.__locatorRef=e,t}function ft(e){return Array.isArray(e)?e.filter(ke):$(e).filter(t=>ke(e[t])).map(t=>e[t])}var pt=Object.assign({},{generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0}),mt=()=>pt;async function ht(e,t,n={}){let r=n?.bails,i=await gt({name:n?.name||`{field}`,rules:t,label:n?.label,bails:r??!0,formData:n?.values||{}},e);return Object.assign(Object.assign({},i),{valid:!i.errors.length})}async function gt(e,t){let n=e.rules;if(Y(n)||Ae(n))return yt(t,Object.assign(Object.assign({},e),{rules:n}));if(W(n)||Array.isArray(n)){let r={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},i=Array.isArray(n)?n:[n],a=i.length,o=[];for(let n=0;n<a;n++){let a=i[n],s=await a(t,r);if(!(typeof s!=`string`&&!Array.isArray(s)&&s)){if(Array.isArray(s))o.push(...s);else{let e=typeof s==`string`?s:xt(r);o.push(e)}if(e.bails)return{errors:o}}}return{errors:o}}let r=Object.assign(Object.assign({},e),{rules:st(n)}),i=[],a=Object.keys(r.rules),o=a.length;for(let n=0;n<o;n++){let o=a[n],s=await bt(r,t,{name:o,params:r.rules[o]});if(s.error&&(i.push(s.error),e.bails))return{errors:i}}return{errors:i}}function _t(e){return!!e&&e.name===`ValidationError`}function vt(e){return{__type:`VVTypedSchema`,async parse(t,n){try{return{output:await e.validate(t,{abortEarly:!1,context:n?.formData||{}}),errors:[]}}catch(e){if(!_t(e))throw e;if(!e.inner?.length&&e.errors.length)return{errors:[{path:e.path,errors:e.errors}]};let t=e.inner.reduce((e,t)=>{let n=t.path||``;return e[n]||(e[n]={errors:[],path:n}),e[n].errors.push(...t.errors),e},{});return{errors:Object.values(t)}}}}}async function yt(e,t){let n=await(Y(t.rules)?t.rules:vt(t.rules)).parse(e,{formData:t.formData}),r=[];for(let e of n.errors)e.errors.length&&r.push(...e.errors);return{value:n.value,errors:r}}async function bt(e,t,n){let r=Se(n.name);if(!r)throw Error(`No such validator '${n.name}' exists.`);let i=St(n.params,e.formData),a={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:i})},o=await r(t,i,a);return typeof o==`string`?{error:o}:{error:o?void 0:xt(a)}}function xt(e){let t=mt().generateMessage;return t?t(e):`Field is invalid`}function St(e,t){let n=e=>ke(e)?e(t):e;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((t,r)=>(t[r]=n(e[r]),t),{})}async function Ct(e,t){let n=await(Y(e)?e:vt(e)).parse(J(t),{formData:J(t)}),r={},i={};for(let e of n.errors){let t=e.errors,n=(e.path||``).replace(/\["(\d+)"\]/g,(e,t)=>`[${t}]`);r[n]={valid:!t.length,errors:t},t.length&&(i[n]=t[0])}return{valid:!n.errors.length,results:r,errors:i,values:n.value,source:`schema`}}async function wt(e,t,n){let r=$(e).map(async r=>{let i=n?.names?.[r],a=await ht(Z(t,r),e[r],{name:i?.name||r,label:i?.label,values:t,bails:n?.bailsMap?.[r]??!0});return Object.assign(Object.assign({},a),{path:r})}),i=!0,a=await Promise.all(r),o={},s={};for(let e of a)o[e.path]={valid:e.valid,errors:e.errors},e.valid||(i=!1,s[e.path]=e.errors[0]);return{valid:i,results:o,errors:s,source:`schema`}}var Tt=0;function Et(e,t){let{value:n,initialValue:r,setInitialValue:i}=Dt(e,t.modelValue,t.form);if(!t.form){let{errors:a,setErrors:o}=At(),s=Tt>=2**53-1?0:++Tt,c=kt(n,r,a,t.schema);function l(e){`value`in e&&(n.value=e.value),`errors`in e&&o(e.errors),`touched`in e&&(c.touched=e.touched??c.touched),`initialValue`in e&&i(e.initialValue)}return{id:s,path:e,value:n,initialValue:r,meta:c,flags:{pendingUnmount:{[s]:!1},pendingReset:!1},errors:a,setState:l}}let a=t.form.createPathState(e,{bails:t.bails,label:t.label,type:t.type,validate:t.validate,schema:t.schema}),o=u(()=>a.errors);function s(r){var a,o;`value`in r&&(n.value=r.value),`errors`in r&&((a=t.form)==null||a.setFieldError(T(e),r.errors)),`touched`in r&&((o=t.form)==null||o.setFieldTouched(T(e),r.touched??!1)),`initialValue`in r&&i(r.initialValue)}return{id:Array.isArray(a.id)?a.id[a.id.length-1]:a.id,path:e,value:n,errors:o,meta:a,initialValue:r,flags:a.__flags,setState:s}}function Dt(e,t,n){let r=z(T(t));function i(){return n?Z(n.initialValues.value,T(e),T(r)):T(r)}function a(t){if(!n){r.value=t;return}n.setFieldInitialValue(T(e),t,!0)}let o=u(i);if(!n)return{value:z(i()),initialValue:o,setInitialValue:a};let s=Ot(t,n,o,e);return n.stageInitialValue(T(e),s,!0),{value:u({get(){return Z(n.values,T(e))},set(t){n.setFieldValue(T(e),t,!1)}}),initialValue:o,setInitialValue:a}}function Ot(e,t,n,r){return F(e)?T(e):e===void 0?Z(t.values,T(r),T(n)):e}function kt(e,t,n,r){let i=D({touched:!1,pending:!1,valid:!0,required:u(()=>{var e;return((e=U(r))?.describe)?.call(e).required??!1}),validated:!!T(n).length,initialValue:u(()=>T(t)),dirty:u(()=>!X(T(e),T(t)))});return w(n,e=>{i.valid=!e.length},{immediate:!0,flush:`sync`}),i}function At(){let e=z([]);return{errors:e,setErrors:t=>{e.value=$e(t)}}}function jt(e,t,n){return je(n?.type)?Pt(e,t,n):Mt(e,t,n)}function Mt(e,t,n){let{initialValue:r,validateOnMount:a,bails:o,type:s,checkedValue:c,label:d,validateOnValueUpdate:f,uncheckedValue:m,controlled:h,keepValueOnUnmount:g,syncVModel:_,form:v}=Nt(n),y=h?qe(we):void 0,b=v||y,x=u(()=>xe(U(e))),S=u(()=>{if(U(b?.schema))return;let e=T(t);return Ae(e)||Y(e)||W(e)||Array.isArray(e)?e:st(e)}),C=!W(S.value)&&Y(U(t)),{id:E,value:D,initialValue:O,meta:k,setState:A,errors:ee,flags:te}=Et(x,{modelValue:r,form:b,bails:o,label:d,type:s,validate:S.value?re:void 0,schema:C?t:void 0}),ne=u(()=>ee.value[0]);_&&Ft({value:D,prop:_,handleChange:I,shouldValidate:()=>f&&!te.pendingReset});let j=(e,t=!1)=>{k.touched=!0,t&&N()};async function M(e){if(b?.validateSchema){let{results:t}=await b.validateSchema(e);return t[U(x)]??{valid:!0,errors:[]}}return S.value?ht(D.value,S.value,{name:U(x),label:U(d),values:b?.values??{},bails:o}):{valid:!0,errors:[]}}let N=Ze(async()=>(k.pending=!0,k.validated=!0,M(`validated-only`)),e=>te.pendingUnmount[B.id]?e:(A({errors:e.errors}),k.pending=!1,k.valid=e.valid,e)),P=Ze(async()=>M(`silent`),e=>(k.valid=e.valid,e));function re(e){return e?.mode===`silent`?P():N()}function I(e,t=!0){ae(ot(e),t)}i(()=>{if(a)return N();(!b||!b.validateSchema)&&P()});function L(e){k.touched=e}function ie(e){let t=e&&`value`in e?e.value:O.value;A({value:J(t),initialValue:J(t),touched:e?.touched??!1,errors:e?.errors||[]}),k.pending=!1,k.validated=!1,P()}let R=l();function ae(e,t=!0){D.value=R&&_?Xe(e,R.props.modelModifiers):e,(t?N:P)()}function z(e){A({errors:Array.isArray(e)?e:[e]})}let B={id:E,name:x,label:d,value:u({get(){return D.value},set(e){ae(e,f)}}),meta:k,errors:ee,errorMessage:ne,type:s,checkedValue:c,uncheckedValue:m,bails:o,keepValueOnUnmount:g,resetField:ie,handleReset:()=>ie(),validate:re,handleChange:I,handleBlur:j,setState:A,setTouched:L,setErrors:z,setValue:ae};return le(Ee,B),F(t)&&typeof T(t)!=`function`&&w(t,(e,t)=>{X(e,t)||(k.validated?N():P())},{deep:!0}),b?(w(u(()=>{let e=S.value;return!e||W(e)||Ae(e)||Y(e)||Array.isArray(e)?{}:Object.keys(e).reduce((t,n)=>{let r=ft(e[n]).map(e=>e.__locatorRef).reduce((e,t)=>{let n=Z(b.values,t)||b.values[t];return n!==void 0&&(e[t]=n),e},{});return Object.assign(t,r),t},{})}),(e,t)=>{Object.keys(e).length&&(X(e,t)||(k.validated?N():P()))}),p(()=>{let e=U(B.keepValueOnUnmount)??U(b.keepValuesOnUnmount),t=U(x);if(e||!b||te.pendingUnmount[B.id]){b?.removePathState(t,E);return}te.pendingUnmount[B.id]=!0;let n=b.getPathState(t);if(Array.isArray(n?.id)&&n?.multiple?n?.id.includes(B.id):n?.id===B.id){if(n?.multiple&&Array.isArray(n.value)){let e=n.value.findIndex(e=>X(e,U(B.checkedValue)));if(e>-1){let r=[...n.value];r.splice(e,1),b.setFieldValue(t,r)}Array.isArray(n.id)&&n.id.splice(n.id.indexOf(B.id),1)}else b.unsetPathValue(U(x));b.removePathState(t,E)}}),B):B}function Nt(e){let t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),n=!!e?.syncVModel,r=typeof e?.syncVModel==`string`?e.syncVModel:e?.modelPropName||`modelValue`,i=n&&!(`initialValue`in(e||{}))?It(l(),r):e?.initialValue;if(!e)return Object.assign(Object.assign({},t()),{initialValue:i});let a=`valueProp`in e?e.valueProp:e.checkedValue,o=`standalone`in e?!e.standalone:e.controlled,s=e?.modelPropName||e?.syncVModel||!1;return Object.assign(Object.assign(Object.assign({},t()),e||{}),{initialValue:i,controlled:o??!0,checkedValue:a,syncVModel:s})}function Pt(e,t,n){let r=n?.standalone?void 0:qe(we),i=n?.checkedValue,a=n?.uncheckedValue;function o(t){let o=t.handleChange,s=u(()=>{let e=U(t.value),n=U(i);return Array.isArray(e)?e.findIndex(e=>X(e,n))>=0:X(n,e)});function c(c,l=!0){if(s.value===c?.target?.checked){l&&t.validate();return}let u=U(e),d=r?.getPathState(u),f=ot(c),p=U(i)??f;r&&d?.multiple&&d.type===`checkbox`?p=Je(Z(r.values,u)||[],p,void 0):n?.type===`checkbox`&&(p=Je(U(t.value),p,U(a))),o(p,l)}return Object.assign(Object.assign({},t),{checked:s,checkedValue:i,uncheckedValue:a,handleChange:c})}return o(Mt(e,t,n))}function Ft({prop:e,value:t,handleChange:n,shouldValidate:r}){let i=l();if(!i||!e)return;let a=typeof e==`string`?e:`modelValue`,o=`update:${a}`;a in i.props&&(w(t,e=>{X(e,It(i,a))||i.emit(o,e)}),w(()=>It(i,a),e=>{if(e===De&&t.value===void 0)return;let i=e===De?void 0:e;X(i,t.value)||n(i,r())}))}function It(e,t){if(e)return e.props[t]}s({name:`Field`,inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>mt().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:De},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(e,t){let n=C(e,`rules`),r=C(e,`name`),i=C(e,`label`),a=C(e,`uncheckedValue`),o=C(e,`keepValue`),{errors:s,value:c,errorMessage:l,validate:d,handleChange:f,handleBlur:p,setTouched:m,resetField:h,handleReset:g,meta:_,checked:v,setErrors:y,setValue:b}=jt(r,n,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:t.attrs.type,initialValue:zt(e,t),checkedValue:t.attrs.value,uncheckedValue:a,label:i,validateOnValueUpdate:e.validateOnModelUpdate,keepValueOnUnmount:o,syncVModel:!0}),x=function(e,t=!0){f(e,t)},S=u(()=>{let{validateOnInput:n,validateOnChange:r,validateOnBlur:i,validateOnModelUpdate:a}=Rt(e);function o(e){p(e,i),W(t.attrs.onBlur)&&t.attrs.onBlur(e)}function s(e){x(e,n),W(t.attrs.onInput)&&t.attrs.onInput(e)}function c(e){x(e,r),W(t.attrs.onChange)&&t.attrs.onChange(e)}let l={name:e.name,onBlur:o,onInput:s,onChange:c};return l[`onUpdate:modelValue`]=e=>x(e,a),l}),w=u(()=>{let n=Object.assign({},S.value);return je(t.attrs.type)&&v&&(n.checked=v.value),Re(Lt(e,t),t.attrs)&&(n.value=c.value),n}),T=u(()=>Object.assign(Object.assign({},S.value),{modelValue:c.value}));function E(){return{field:w.value,componentField:T.value,value:c.value,meta:_,errors:s.value,errorMessage:l.value,validate:d,resetField:h,handleChange:x,handleInput:e=>x(e,!1),handleReset:g,handleBlur:S.value.onBlur,setTouched:m,setErrors:y,setValue:b}}return t.expose({value:c,meta:_,errors:s,errorMessage:l,setErrors:y,setTouched:m,setValue:b,reset:h,validate:d,handleChange:f}),()=>{let n=M(Lt(e,t)),r=nt(n,t,E);return n?B(n,Object.assign(Object.assign({},t.attrs),w.value),r):r}}});function Lt(e,t){let n=e.as||``;return!e.as&&!t.slots.default&&(n=`input`),n}function Rt(e){let{validateOnInput:t,validateOnChange:n,validateOnBlur:r,validateOnModelUpdate:i}=mt();return{validateOnInput:e.validateOnInput??t,validateOnChange:e.validateOnChange??n,validateOnBlur:e.validateOnBlur??r,validateOnModelUpdate:e.validateOnModelUpdate??i}}function zt(e,t){return je(t.attrs.type)?Ve(e,`modelValue`)?e.modelValue:void 0:Ve(e,`modelValue`)?e.modelValue:t.attrs.value}var Bt=0,Vt=[`bails`,`fieldsCount`,`id`,`multiple`,`type`,`validate`];function Ht(e){let t=e?.initialValues||{},n=Object.assign({},U(t)),r=T(e?.validationSchema);return r&&Y(r)&&W(r.cast)?J(r.cast(n)||{}):J(n)}function Ut(e){let t=Bt++,n=e?.name||`Form`,r=0,a=z(!1),o=z(!1),s=z(0),c=[],l=D(Ht(e)),d=z([]),f=z({}),p=z({}),m=tt(()=>{p.value=d.value.reduce((e,t)=>(e[xe(U(t.path))]=t,e),{})});function h(e,t){let n=L(e);if(!n){typeof e==`string`&&(f.value[xe(e)]=$e(t));return}if(typeof e==`string`){let t=xe(e);f.value[t]&&delete f.value[t]}n.errors=$e(t),n.valid=!n.errors.length}function g(e){$(e).forEach(t=>{h(t,e[t])})}e?.initialErrors&&g(e.initialErrors);let _=u(()=>{let e=d.value.reduce((e,t)=>(t.errors.length&&(e[U(t.path)]=t.errors),e),{});return Object.assign(Object.assign({},f.value),e)}),v=u(()=>$(_.value).reduce((e,t)=>{let n=_.value[t];return n?.length&&(e[t]=n[0]),e},{})),y=u(()=>d.value.reduce((e,t)=>(e[U(t.path)]={name:U(t.path)||``,label:t.label||``},e),{})),b=u(()=>d.value.reduce((e,t)=>(e[U(t.path)]=t.bails??!0,e),{})),x=Object.assign({},e?.initialErrors||{}),C=e?.keepValuesOnUnmount??!1,{initialValues:E,originalInitialValues:O,setInitialValues:k}=Gt(d,l,e),te=Wt(d,l,O,v),ne=u(()=>d.value.reduce((e,t)=>{let n=Z(l,U(t.path));return Q(e,U(t.path),n),e},{})),j=e?.validationSchema;function M(e,t){let n=u(()=>Z(E.value,U(e))),i=p.value[U(e)],a=t?.type===`checkbox`||t?.type===`radio`;if(i&&a){i.multiple=!0;let e=r++;return Array.isArray(i.id)?i.id.push(e):i.id=[i.id,e],i.fieldsCount++,i.__flags.pendingUnmount[e]=!1,i}let o=u(()=>Z(l,U(e))),s=U(e),c=R.findIndex(e=>e===s);c!==-1&&R.splice(c,1);let f=u(()=>{let n=U(j);if(Y(n))return n.describe?.call(n,U(e)).required??!1;let r=U(t?.schema);return Y(r)?r.describe?.call(r).required??!1:!1}),h=r++,g=D({id:h,path:e,touched:!1,pending:!1,valid:!0,validated:!!x[s]?.length,required:f,initialValue:n,errors:ee([]),bails:t?.bails??!1,label:t?.label,type:t?.type||`default`,value:o,multiple:!1,__flags:{pendingUnmount:{[h]:!1},pendingReset:!1},fieldsCount:1,validate:t?.validate,dirty:u(()=>!X(T(o),T(n)))});return d.value.push(g),p.value[s]=g,m(),v.value[s]&&!x[s]&&S(()=>{q(s,{mode:`silent`})}),F(e)&&w(e,e=>{m();let t=J(o.value);p.value[e]=g,S(()=>{Q(l,e,t)})}),g}let N=Ye(De,5),P=Ye(De,5),re=Ze(async e=>await(e===`silent`?N():P()),(e,[t])=>{let n=$(V.errorBag.value),r=[...new Set([...$(e.results),...d.value.map(e=>e.path),...n])].sort().reduce((n,r)=>{let i=r,a=L(i)||ie(i),o=e.results[i]?.errors||[],s=U(a?.path)||i,c=Kt({errors:o,valid:!o.length},n.results[s]);return n.results[s]=c,c.valid||(n.errors[s]=c.errors[0]),a&&f.value[s]&&delete f.value[s],a?(a.valid=c.valid,t===`silent`||t===`validated-only`&&!a.validated||h(a,c.errors),n):(h(s,o),n)},{valid:e.valid,results:{},errors:{},source:e.source});return e.values&&(r.values=e.values,r.source=e.source),$(r.results).forEach(e=>{let n=L(e);n&&t!==`silent`&&(t===`validated-only`&&!n.validated||h(n,r.results[e]?.errors))}),r});function I(e){d.value.forEach(e)}function L(e){let t=typeof e==`string`?xe(e):e;return typeof t==`string`?p.value[t]:t}function ie(e){return d.value.filter(t=>e.startsWith(U(t.path))).reduce((e,t)=>e?t.path.length>e.path.length?t:e:t,void 0)}let R=[],ae;function B(e){return R.push(e),ae||=S(()=>{[...R].sort().reverse().forEach(e=>{Ke(l,e)}),R=[],ae=null}),ae}function oe(e){return function(t,n){return function(r){return r instanceof Event&&(r.preventDefault(),r.stopPropagation()),I(e=>e.touched=!0),a.value=!0,s.value++,K().then(i=>{let a=J(l);if(i.valid&&typeof t==`function`){let n=J(ne.value),o=e?n:a;return i.values&&(o=i.source===`schema`?i.values:Object.assign({},o,i.values)),t(o,{evt:r,controlledValues:n,setErrors:g,setFieldError:h,setTouched:_e,setFieldTouched:me,setValues:fe,setFieldValue:H,resetForm:ye,resetField:ve})}!i.valid&&typeof n==`function`&&n({values:a,evt:r,errors:i.errors,results:i.results})}).then(e=>(a.value=!1,e),e=>{throw a.value=!1,e})}}}let se=oe(!1);se.withControlled=oe(!0);function ce(e,t){let n=d.value.findIndex(n=>n.path===e&&(Array.isArray(n.id)?n.id.includes(t):n.id===t)),r=d.value[n];if(!(n===-1||!r)){if(S(()=>{q(e,{mode:`silent`,warn:!1})}),r.multiple&&r.fieldsCount&&r.fieldsCount--,Array.isArray(r.id)){let e=r.id.indexOf(t);e>=0&&r.id.splice(e,1),delete r.__flags.pendingUnmount[t]}(!r.multiple||r.fieldsCount<=0)&&(d.value.splice(n,1),Se(e),m(),delete p.value[e])}}function ue(e){$(p.value).forEach(t=>{t.startsWith(e)&&delete p.value[t]}),d.value=d.value.filter(t=>!t.path.startsWith(e)),S(()=>{m()})}let V={name:n,formId:t,values:l,controlledValues:ne,errorBag:_,errors:v,schema:j,submitCount:s,meta:te,isSubmitting:a,isValidating:o,fieldArrays:c,keepValuesOnUnmount:C,validateSchema:T(j)?re:void 0,validate:K,setFieldError:h,validateField:q,setFieldValue:H,setValues:fe,setErrors:g,setFieldTouched:me,setTouched:_e,resetForm:ye,resetField:ve,handleSubmit:se,useFieldModel:je,defineInputBinds:Me,defineComponentBinds:Ne,defineField:ke,stageInitialValue:Ce,unsetInitialValue:Se,setFieldInitialValue:Ee,createPathState:M,getPathState:L,unsetPathValue:B,removePathState:ce,initialValues:E,getAllPathStates:()=>d.value,destroyPath:ue,isFieldTouched:he,isFieldDirty:G,isFieldValid:ge};function H(e,t,n=!0){let r=J(t),i=typeof e==`string`?e:e.path;L(i)||M(i),Q(l,i,r),n&&q(i)}function de(e,t=!0){$(l).forEach(e=>{delete l[e]}),$(e).forEach(t=>{H(t,e[t],!1)}),t&&K()}function fe(e,t=!0){be(l,e),c.forEach(e=>e&&e.reset()),t&&K()}function pe(e,t){let n=L(U(e))||M(e);return u({get(){return n.value},set(n){H(U(e),n,U(t)??!1)}})}function me(e,t){let n=L(e);n&&(n.touched=t)}function he(e){let t=L(e);return t?t.touched:d.value.filter(t=>t.path.startsWith(e)).some(e=>e.touched)}function G(e){let t=L(e);return t?t.dirty:d.value.filter(t=>t.path.startsWith(e)).some(e=>e.dirty)}function ge(e){let t=L(e);return t?t.valid:d.value.filter(t=>t.path.startsWith(e)).every(e=>e.valid)}function _e(e){if(typeof e==`boolean`){I(t=>{t.touched=e});return}$(e).forEach(t=>{me(t,!!e[t])})}function ve(e,t){let n=t&&`value`in t?t.value:Z(E.value,e),r=L(e);r&&(r.__flags.pendingReset=!0),Ee(e,J(n),!0),H(e,n,!1),me(e,t?.touched??!1),h(e,t?.errors||[]),S(()=>{r&&(r.__flags.pendingReset=!1)})}function ye(e,t){let n=J(e?.values?e.values:O.value);n=t?.force?n:be(O.value,n),n=Y(j)&&W(j.cast)?j.cast(n):n,k(n,{force:t?.force}),I(t=>{t.__flags.pendingReset=!0,t.validated=!1,t.touched=e?.touched?.[U(t.path)]||!1,H(U(t.path),Z(n,U(t.path)),!1),h(U(t.path),void 0)}),t?.force?de(n,!1):fe(n,!1),g(e?.errors||{}),s.value=e?.submitCount||0,S(()=>{K({mode:`silent`}),I(e=>{e.__flags.pendingReset=!1})})}async function K(e){let t=e?.mode||`force`;if(t===`force`&&I(e=>e.validated=!0),V.validateSchema)return V.validateSchema(t);o.value=!0;let n=await Promise.all(d.value.map(t=>t.validate?t.validate(e).then(e=>({key:U(t.path),valid:e.valid,errors:e.errors,value:e.value})):Promise.resolve({key:U(t.path),valid:!0,errors:[],value:void 0})));o.value=!1;let r={},i={},a={};for(let e of n)r[e.key]={valid:e.valid,errors:e.errors},e.value&&Q(a,e.key,e.value),e.errors.length&&(i[e.key]=e.errors[0]);return{valid:n.every(e=>e.valid),results:r,errors:i,values:a,source:`fields`}}async function q(e,t){let n=L(e);if(n&&t?.mode!==`silent`&&(n.validated=!0),j){let{results:n}=await re(t?.mode||`validated-only`);return n[e]||{errors:[],valid:!0}}return n?.validate?n.validate(t):(!n&&t?.warn,Promise.resolve({errors:[],valid:!0}))}function Se(e){Ke(E.value,e)}function Ce(t,n,r=!1){Ee(t,n),Q(l,t,n),r&&!e?.initialValues&&Q(O.value,t,J(n))}function Ee(e,t,n=!1){Q(E.value,e,J(t)),n&&Q(O.value,e,J(t))}async function De(){let e=T(j);if(!e)return{valid:!0,results:{},errors:{},source:`none`};o.value=!0;let t=Ae(e)||Y(e)?await Ct(e,l):await wt(e,l,{names:y.value,bailsMap:b.value});return o.value=!1,t}let Oe=se((e,{evt:t})=>{ze(t)&&t.target.submit()});i(()=>{if(e?.initialErrors&&g(e.initialErrors),e?.initialTouched&&_e(e.initialTouched),e?.validateOnMount){K();return}V.validateSchema&&V.validateSchema(`silent`)}),F(j)&&w(j,()=>{var e;(e=V.validateSchema)==null||e.call(V,`validated-only`)}),le(we,V);function ke(e,t){let n=W(t)?void 0:t?.label,r=L(U(e))||M(e,{label:n}),i=()=>W(t)?t(et(r,Vt)):t||{};function a(){r.touched=!0,(i().validateOnBlur??mt().validateOnBlur)&&q(U(r.path))}function o(){(i().validateOnInput??mt().validateOnInput)&&S(()=>{q(U(r.path))})}function s(){(i().validateOnChange??mt().validateOnChange)&&S(()=>{q(U(r.path))})}let c=u(()=>{let e={onChange:s,onInput:o,onBlur:a};return W(t)?Object.assign(Object.assign({},e),t(et(r,Vt)).props||{}):t?.props?Object.assign(Object.assign({},e),t.props(et(r,Vt))):e});return[pe(e,()=>i().validateOnModelUpdate??mt()?.validateOnModelUpdate??!0),c]}function je(e){return Array.isArray(e)?e.map(e=>pe(e,!0)):pe(e)}function Me(e,t){let[n,r]=ke(e,t);function i(){r.value.onBlur()}function a(t){let n=ot(t);H(U(e),n,!1),r.value.onInput()}function o(t){let n=ot(t);H(U(e),n,!1),r.value.onChange()}return u(()=>Object.assign(Object.assign({},r.value),{onBlur:i,onInput:a,onChange:o,value:n.value}))}function Ne(e,t){let[n,r]=ke(e,t),i=L(U(e));function a(e){n.value=e}return u(()=>{let e=W(t)?t(et(i,Vt)):t||{};return Object.assign({[e.model||`modelValue`]:n.value,[`onUpdate:${e.model||`modelValue`}`]:a},r.value)})}let Pe=Object.assign(Object.assign({},V),{values:A(l),handleReset:()=>ye(),submitForm:Oe});return le(Te,Pe),Pe}function Wt(e,t,n,r){let i={touched:`some`,pending:`some`,valid:`every`},a=u(()=>!X(t,T(n)));function o(){let t=e.value;return $(i).reduce((e,n)=>(e[n]=t[i[n]](e=>e[n]),e),{})}let s=D(o());return R(()=>{let e=o();s.touched=e.touched,s.valid=e.valid,s.pending=e.pending}),u(()=>Object.assign(Object.assign({initialValues:T(n)},s),{valid:s.valid&&!$(r.value).length,dirty:a.value}))}function Gt(e,t,n){let r=Ht(n),i=z(r),a=z(J(r));function o(n,r){r?.force?(i.value=J(n),a.value=J(n)):(i.value=be(J(i.value)||{},J(n)),a.value=be(J(a.value)||{},J(n))),r?.updateFields&&e.value.forEach(e=>{if(e.touched)return;let n=Z(i.value,U(e.path));Q(t,U(e.path),J(n))})}return{initialValues:i,originalInitialValues:a,setInitialValues:o}}function Kt(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}s({name:`Form`,inheritAttrs:!1,props:{as:{type:null,default:`form`},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1},name:{type:String,default:`Form`}},setup(e,t){let n=C(e,`validationSchema`),r=C(e,`keepValues`),{errors:i,errorBag:a,values:o,meta:s,isSubmitting:c,isValidating:l,submitCount:u,controlledValues:d,validate:f,validateField:p,handleReset:m,resetForm:h,handleSubmit:g,setErrors:_,setFieldError:v,setFieldValue:y,setValues:b,setFieldTouched:x,setTouched:S,resetField:w}=Ut({validationSchema:n.value?n:void 0,initialValues:e.initialValues,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:r,name:e.name}),T=g((e,{evt:t})=>{ze(t)&&t.target.submit()},e.onInvalidSubmit),E=e.onSubmit?g(e.onSubmit,e.onInvalidSubmit):T;function D(e){Be(e)&&e.preventDefault(),m(),typeof t.attrs.onReset==`function`&&t.attrs.onReset()}function O(t,n){return g(typeof t==`function`&&!n?t:n,e.onInvalidSubmit)(t)}function k(){return J(o)}function A(){return J(s.value)}function ee(){return J(i.value)}function te(){return{meta:s.value,errors:i.value,errorBag:a.value,values:o,isSubmitting:c.value,isValidating:l.value,submitCount:u.value,controlledValues:d.value,validate:f,validateField:p,handleSubmit:O,handleReset:m,submitForm:T,setErrors:_,setFieldError:v,setFieldValue:y,setValues:b,setFieldTouched:x,setTouched:S,resetForm:h,resetField:w,getValues:k,getMeta:A,getErrors:ee}}return t.expose({setFieldError:v,setErrors:_,setFieldValue:y,setValues:b,setFieldTouched:x,setTouched:S,resetForm:h,validate:f,validateField:p,resetField:w,getValues:k,getMeta:A,getErrors:ee,values:o,meta:s,errors:i}),function(){let n=e.as===`form`?e.as:e.as?M(e.as):null,r=nt(n,t,te);if(!n)return r;let i=n===`form`?{novalidate:!0}:{};return B(n,Object.assign(Object.assign(Object.assign({},i),t.attrs),{onSubmit:E,onReset:D}),r)}}});function qt(e){let t=qe(we,void 0),n=z([]),r=()=>{},i={fields:n,remove:r,push:r,swap:r,insert:r,update:r,replace:r,prepend:r,move:r};if(!t||!T(e))return i;let a=t.fieldArrays.find(t=>T(t.path)===T(e));if(a)return a;let o=0;function s(){return Z(t?.values,U(e),[])||[]}function c(){let e=s();Array.isArray(e)&&(n.value=e.map((e,t)=>u(e,t,n.value)),l())}c();function l(){let e=n.value.length;for(let t=0;t<e;t++){let r=n.value[t];r.isFirst=t===0,r.isLast=t===e-1}}function u(r,i,a){if(a&&!he(i)&&a[i])return a[i];let s=o++;return{key:s,value:Qe({get(){let i=Z(t?.values,U(e),[])||[],a=n.value.findIndex(e=>e.key===s);return a===-1?r:i[a]},set(e){let t=n.value.findIndex(e=>e.key===s);t!==-1&&v(t,e)}}),isFirst:!1,isLast:!1}}function d(){l(),t?.validate({mode:`silent`})}function f(r){let i=U(e),a=Z(t?.values,i);if(!a||!Array.isArray(a))return;let o=[...a];o.splice(r,1);let s=i+`[${r}]`;t.destroyPath(s),t.unsetInitialValue(s),Q(t.values,i,o),n.value.splice(r,1),d()}function m(r){let i=J(r),a=U(e),o=Z(t?.values,a),s=he(o)?[]:o;if(!Array.isArray(s))return;let c=[...s];c.push(i),t.stageInitialValue(a+`[${c.length-1}]`,i),Q(t.values,a,c),n.value.push(u(i)),d()}function h(r,i){let a=U(e),o=Z(t?.values,a);if(!Array.isArray(o)||!(r in o)||!(i in o))return;let s=[...o],c=[...n.value],u=s[r];s[r]=s[i],s[i]=u;let d=c[r];c[r]=c[i],c[i]=d,Q(t.values,a,s),n.value=c,l()}function g(r,i){let a=J(i),o=U(e),s=Z(t?.values,o);if(!Array.isArray(s)||s.length<r)return;let c=[...s],l=[...n.value];c.splice(r,0,a),l.splice(r,0,u(a)),Q(t.values,o,c),n.value=l,d()}function _(n){let r=U(e);t.stageInitialValue(r,n),Q(t.values,r,n),c(),d()}function v(n,r){let i=U(e),a=Z(t?.values,i);!Array.isArray(a)||a.length-1<n||(Q(t.values,`${i}[${n}]`,r),t?.validate({mode:`validated-only`}))}function y(r){let i=J(r),a=U(e),o=Z(t?.values,a),s=he(o)?[]:o;if(!Array.isArray(s))return;let c=[i,...s];Q(t.values,a,c),t.stageInitialValue(a+`[0]`,i),n.value.unshift(u(i)),d()}function b(r,i){let a=U(e),o=Z(t?.values,a),s=he(o)?[]:[...o];if(!Array.isArray(o)||!(r in o)||!(i in o))return;let c=[...n.value],l=c[r];c.splice(r,1),c.splice(i,0,l);let u=s[r];s.splice(r,1),s.splice(i,0,u),Q(t.values,a,s),n.value=c,d()}let x={fields:n,remove:f,push:m,swap:h,insert:g,update:v,replace:_,prepend:y,move:b};return t.fieldArrays.push(Object.assign({path:e,reset:c},x)),p(()=>{let n=t.fieldArrays.findIndex(t=>U(t.path)===U(e));n>=0&&t.fieldArrays.splice(n,1)}),w(s,e=>{X(e,n.value.map(e=>e.value))||c()}),x}s({name:`FieldArray`,inheritAttrs:!1,props:{name:{type:String,required:!0}},setup(e,t){let{push:n,remove:r,swap:i,insert:a,replace:o,update:s,prepend:c,move:l,fields:u}=qt(()=>e.name);function d(){return{fields:u.value,push:n,remove:r,swap:i,insert:a,update:s,replace:o,prepend:c,move:l}}return t.expose({push:n,remove:r,swap:i,insert:a,update:s,replace:o,prepend:c,move:l}),()=>nt(void 0,t,d)}}),s({name:`ErrorMessage`,props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(e,t){let n=x(we,void 0),r=u(()=>n?.errors.value[e.name]);function i(){return{message:r.value}}return()=>{if(!r.value)return;let n=e.as?M(e.as):e.as,a=nt(n,t,i),o=Object.assign({role:`alert`},t.attrs);return!n&&(Array.isArray(a)||!a)&&a?.length?a:(Array.isArray(a)||!a)&&!a?.length?B(n||`span`,o,r.value):B(n,o,a)}}});var Jt=[`type`,`value`],Yt={key:0,class:`text-red-400`},Xt=s({__name:`CustomInput`,props:{modelValue:{},error:{},type:{default:`text`}},emits:[`update:modelValue`,`blur`],setup(e){return(t,n)=>(O(),v(`div`,null,[m(`input`,{type:e.type,value:e.modelValue,onInput:n[0]||=e=>t.$emit(`update:modelValue`,e.target?.value??``),onBlur:n[1]||=e=>t.$emit(`blur`),class:fe([`form-control border border-gray-300 rounded-md w-full px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,{"border-red-500":e.error}])},null,42,Jt),e.error?(O(),v(`span`,Yt,h(e.error),1)):a(``,!0)]))}}),Zt=[`type`,`value`],Qt={key:0,class:`text-red-400`},$t=s({__name:`CustomTextArea`,props:{modelValue:{},error:{},type:{default:`text`}},emits:[`update:modelValue`,`blur`],setup(e){return(t,n)=>(O(),v(`div`,null,[m(`textarea`,{type:e.type,value:e.modelValue,onInput:n[0]||=e=>t.$emit(`update:modelValue`,e.target?.value??``),onBlur:n[1]||=e=>t.$emit(`blur`),class:fe([`form-control border border-gray-300 rounded-md w-full px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,{"border-red-500":e.error}])},null,42,Zt),e.error?(O(),v(`span`,Qt,h(e.error),1)):a(``,!0)]))}}),en=ce({title:oe().required(`Este campo es super importante`).min(3,`Mínimo de 3 letras!!!`),slug:oe().required(),description:oe().required(),price:I().required(),stock:I().required().min(1),gender:oe().required().oneOf([`men`,`women`,`kid`])}),tn=s({components:{CustomInput:Xt,CustomTextArea:$t},props:{productId:{type:String,required:!0}},setup(e){let i=ie(),a=P(),{data:o,isLoading:s,isError:c,refetch:l}=t({queryKey:[`product`,e.productId],queryFn:()=>n(e.productId),retry:!1}),{mutate:u,isPending:d,isSuccess:f,data:p}=me({mutationFn:r}),{values:m,defineField:h,errors:g,handleSubmit:_,resetForm:v,meta:y}=Ut({validationSchema:en}),[b,x]=h(`title`),[S,C]=h(`slug`),[T,E]=h(`description`),[D,O]=h(`price`),[k,A]=h(`stock`),[ee,te]=h(`gender`),{fields:ne,remove:j,push:M}=qt(`sizes`),{fields:N}=qt(`images`),F=z([]),re=_(async e=>{let t={...e,images:[...e.images,...F.value]};console.log(`FORM DATA ENVIADA:`,t),u(t)});return R(()=>{if(c.value&&!s.value){i.replace(`/admin/products`);return}}),w(o,()=>{o&&v({values:o.value})},{deep:!0,immediate:!0}),w(f,e=>{e&&(a.success(`Producto actualizado correctamente`),i.replace(`/admin/products/${p.value.id}`),i.replace(`/admin/products`),v({values:p.value}),F.value=[])}),w(()=>e.productId,()=>{l()}),{values:m,errors:g,title:b,titleAttrs:x,slug:S,slugAttrs:C,description:T,descriptionAttrs:E,price:D,priceAttrs:O,stock:k,stockAttrs:A,gender:ee,genderAttrs:te,meta:y,imageFiles:F,onFileChanged:e=>{let t=e.target.files;if(t&&t.length!==0)for(let e of t)F.value.push(e)},product:o,isLoading:s,isError:c,allSizes:[`XS`,`S`,`M`,`L`,`XL`,`XXL`],onSubmit:re,toggleSize:e=>{let t=ne.value.map(e=>e.value);t.includes(e)?j(t.indexOf(e)):M(e)},sizes:ne,images:N,isPending:d,hasSize:e=>ne.value.map(e=>e.value).includes(e),temporalImageUrl:e=>URL.createObjectURL(e)}}}),nn={class:`bg-white px-5 py-2 rounded`},rn={class:`text-3xl`},an={class:`text-blue-500`},on={class:`first-col`},sn={class:`mb-4`},cn={class:`mb-4`},ln={class:`mb-4 flex-1`},un={class:`flex flex-row gap-3`},dn={class:`mb-4 flex-1`},fn={class:`mb-4 flex-1`},pn={class:`mb-4 flex-1`},mn={class:`flex`},hn=[`onClick`],gn={class:`first-col`},_n={class:`flex p-2 overflow-x-auto space-x-8 w-full h-[265px] bg-gray-200 rounded`},vn=[`src`,`alt`],yn=[`src`],bn={class:`col-span-2 my-2`},xn={class:`mb-4`},Sn={class:`my-4 text-right`},Cn=[`disabled`];function wn(e,t,n,r,i,a){let o=se(`CustomInput`),s=se(`CustomTextArea`);return O(),v(c,null,[m(`div`,nn,[m(`h1`,rn,[t[8]||=_(`Producto: `,-1),m(`small`,an,h(e.title),1)]),t[9]||=m(`hr`,{class:`my-4`},null,-1)]),m(`form`,{onSubmit:t[7]||=(...t)=>e.onSubmit&&e.onSubmit(...t),class:`grid grid-cols-1 sm:grid-cols-2 bg-white px-5 gap-5`},[m(`div`,on,[m(`div`,sn,[t[10]||=m(`label`,{for:`title`,class:`form-label`},`Título`,-1),y(o,b({modelValue:e.title,"onUpdate:modelValue":t[0]||=t=>e.title=t},e.titleAttrs,{error:e.errors.title}),null,16,[`modelValue`,`error`])]),m(`div`,cn,[t[11]||=m(`label`,{for:`slug`,class:`form-label`},`Slug`,-1),y(o,b({modelValue:e.slug,"onUpdate:modelValue":t[1]||=t=>e.slug=t},e.slugAttrs,{error:e.errors.slug}),null,16,[`modelValue`,`error`])]),m(`div`,ln,[t[12]||=m(`label`,{for:`description`,class:`form-label`},`Descripción`,-1),y(s,b({modelValue:e.description,"onUpdate:modelValue":t[2]||=t=>e.description=t},e.descriptionAttrs,{error:e.errors.description}),null,16,[`modelValue`,`error`])]),m(`div`,un,[m(`div`,dn,[t[13]||=m(`label`,{for:`price`,class:`form-label`},`Precio`,-1),y(o,b({modelValue:e.price,"onUpdate:modelValue":t[3]||=t=>e.price=t,modelModifiers:{number:!0}},e.priceAttrs,{error:e.errors.price}),null,16,[`modelValue`,`error`])]),m(`div`,fn,[t[14]||=m(`label`,{for:`stock`,class:`form-label`},`Inventario`,-1),y(o,b({modelValue:e.stock,"onUpdate:modelValue":t[4]||=t=>e.stock=t,modelModifiers:{number:!0}},e.stockAttrs,{error:e.errors.stock}),null,16,[`modelValue`,`error`])])]),m(`div`,pn,[t[15]||=m(`label`,{for:`sizes`,class:`form-label`},`Tallas`,-1),t[16]||=_(` <`,-1),m(`div`,mn,[(O(!0),v(c,null,L(e.allSizes,t=>(O(),v(`button`,{key:t,onClick:n=>e.toggleSize(t),type:`button`,class:fe([`p-2 rounded w-14 mr-2 flex-1`,{"bg-blue-500 text-white":e.hasSize(t),"bg-blue-100":!e.hasSize(t)}])},h(t),11,hn))),128))])])]),m(`div`,gn,[t[20]||=m(`label`,{for:`stock`,class:`form-label`},`Imágenes`,-1),m(`div`,_n,[(O(!0),v(c,null,L(e.images,t=>(O(),v(`div`,{key:t.value,class:`flex-shrink-0`},[m(`img`,{src:t.value,alt:e.title,class:`w-[250px] h-[250px] rounded`},null,8,vn)]))),128)),(O(!0),v(c,null,L(e.imageFiles,t=>(O(),v(`div`,{key:t.name,class:`flex-shrink-0`},[m(`img`,{src:e.temporalImageUrl(t),class:`w-[250px] h-[250px] rounded`},null,8,yn)]))),128))]),m(`div`,bn,[t[17]||=m(`label`,{for:`image`,class:`form-label`},`Subir imagen`,-1),m(`input`,{multiple:``,type:`file`,id:`image`,class:`border border-gray-300 rounded-md w-full px-3 py-2 text-sm cursor-pointer file:bg-gray-300 file:text-gray-700 file:border file:border-grays-700 file:px-3 file:py-1 file:rounded-md hover:file:bg-gray-300 transition`,accept:`image/*`,onChange:t[5]||=(...t)=>e.onFileChanged&&e.onFileChanged(...t)},null,32)]),m(`div`,xn,[t[19]||=m(`label`,{for:`stock`,class:`form-label`},`Género`,-1),E(m(`select`,b({"onUpdate:modelValue":t[6]||=t=>e.gender=t},e.genderAttrs,{class:`form-control border border-gray-300 rounded-md w-full px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500`}),[...t[18]||=[m(`option`,{value:``},`Seleccione`,-1),m(`option`,{value:`kid`},`Niño`,-1),m(`option`,{value:`women`},`Mujer`,-1),m(`option`,{value:`men`},`Hombre`,-1)]],16),[[d,e.gender]]),E(m(`span`,{class:`text-red-400`},h(e.errors.gender),513),[[f,e.errors.gender]])]),m(`div`,Sn,[m(`button`,{disabled:e.isPending,type:`submit`,class:`disabled:bg-gray-300 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded`},` Guardar `,8,Cn)])])],32)],64)}var Tn=j(tn,[[`render`,wn]]);export{Tn as default};